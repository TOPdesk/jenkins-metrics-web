extends _page

mixin millisecsToTimeString(millis)
  - var base = Math.floor(Math.abs(millis) / 1000);
  - var seconds = base % 60;
  - var minutes = Math.floor(base / 60) % 60;
  | #{minutes}m #{('00' + seconds).slice(-2)}s

mixin decimal(number)
  | #{Number(number).toFixed(2)}

block content
  section#average-build-times
    table
      tr
        th(colspan=2) Average Build Time
        th
      tr
        td All
        td
          +millisecsToTimeString(averageBuildTime)
        td(rowspan=3,class="#{averageBuildTimeImprovement > 0 ? 'gain' : 'loss'}")
          +millisecsToTimeString(averageBuildTimeImprovement)
      tr
        td Earliest
        td
          +millisecsToTimeString(earliestAverageBuildTime)
      tr
        td Latest
        td
          +millisecsToTimeString(latestAverageBuildTime)

  section#average-skipped-tests
    table
      tr
        th(colspan=2) Average Skipped Tests
        th
      tr
        td All
        td
          +decimal(averageSkippedTests)
        td(rowspan=3,class="#{averageSkippedTestsImprovement >= 0 ? 'gain' : 'loss'}")
          +decimal(averageSkippedTestsImprovement)
      tr
        td Earliest
        td
          +decimal(earliestAverageSkippedTests)
      tr
        td Latest
        td
          +decimal(latestAverageSkippedTests)
